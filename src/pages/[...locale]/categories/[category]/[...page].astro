---
import i18n from 'i18next';
import BlogIndex from '@/layouts/blog-index.astro';
import { getCategoryLink } from '@/lib/link';
import { findMenuItemById } from '@/lib/menu';
import { getCategoryStaticPaths } from '@/lib/posts';

export async function getStaticPaths({ paginate }: { paginate: any }) {
  return await getCategoryStaticPaths({ paginate });
}

const { page } = Astro.props;
const { category } = Astro.params;
const cat = findMenuItemById(Astro.params.category, i18n.language);
const baseLink = getCategoryLink({
  category,
});
---

<BlogIndex
  title={cat?.name}
  items={page.data}
  pagination={{
    current: page.currentPage,
    total: page.lastPage,
  }}
  baseLink={baseLink}
/>
